"use strict";$(function(){var i="",t=!1,s=!1,l=!1,n=!1,r=!1,c=!0,o=!1;$("#register .checkCode").find(".code").eq(0).html(randomNL(4)),$("#register .input").find("input").focus(function(){$(this).removeClass("focus"),$(this).nextAll("p").css("visibility","visible"),t=!0}),$("#register .phoneNum").bind("input propertychange",function(){var e=$(this).find("input").val().length;11==e&&(i=$(this).find("input").val()),11<e&&$(this).find("input").val(i)}),$("#register .phoneNum").find("input").eq(0).blur(function(){var e=$.trim($(this).val());e?formReg.tel(e)?$.ajax({type:"GET",url:"../api/checkname.php",data:{username:e},success:function(e){var i=JSON.parse(e);"0"==i.code&&($(this).nextAll("p").html(i.message),$(this).nextAll("p").css("color","green"),s=!0)}.bind($(this))}):(s=!1,$(this).nextAll("p").html("<i></i>手机号码格式不正确"),$(this).nextAll("p").css("color","#E24A4A")):(s=!1,$(this).nextAll("p").html("<i></i>内容不能为空"),$(this).nextAll("p").css("color","#E24A4A"))}),$("#register .pwd").find("input").eq(0).blur(function(){var e=$.trim($(this).val());e?formReg.password(e)?($(this).nextAll("p").html("密码格式正确"),$(this).nextAll("p").css("color","green"),l=!0):(l=!1,$(this).nextAll("p").html("<i></i>密码6-18位,首字母开头"),$(this).nextAll("p").css("color","#E24A4A")):(l=!1,$(this).nextAll("p").html("<i></i>内容不能为空"),$(this).nextAll("p").css("color","#E24A4A"))}),$("#register .pwdAgain").find("input").eq(0).blur(function(){var e=$.trim($("#register .pwd").find("input").val());if(e&&l){var i=$.trim($(this).val());if(i)formReg.passSure(e,i)?($(this).nextAll("p").eq(0).html("密码正确"),$(this).nextAll("p").eq(0).css("color","green"),n=!0):(n=!1,$(this).nextAll("p").eq(0).html("<i></i>密码不一致"),$(this).nextAll("p").eq(0).css("color","#E24A4A"));else n=!1,$(this).nextAll("p").eq(0).html("<i></i>内容不能为空"),$(this).nextAll("p").eq(0).css("color","#E24A4A")}else n=!1,$("#register .pwd").find("input").addClass("focus"),$("#register .pwd").find("input").nextAll("p").css("visibility","visible"),$("#register .pwd").find("input").nextAll("p").html("<i></i>请先输入密码且格式正确")}),$("#register .checkCode").find(".change").eq(0).click(function(){$(this).prev().html(randomNL(4))}),$("#register .checkCode").find("input").eq(0).blur(function(){var e=$(this).next().html().toLowerCase(),i=$.trim($(this).val());r=i?i==e?($(this).nextAll(".checkCode_error").eq(0).html("验证码正确"),$(this).nextAll(".checkCode_error").eq(0).css("color","green"),!0):($(this).nextAll(".checkCode_error").eq(0).html("验证码错误"),$(this).nextAll(".checkCode_error").eq(0).css("color","#E24A4A"),!1):($(this).nextAll(".checkCode_error").eq(0).html("<i></i>内容不能为空"),$(this).nextAll(".checkCode_error").eq(0).css("color","#E24A4A"),!1)}),$("#register .sendMess").find(".sure").eq(0).click(function(){c=!c,console.log(c)}),$("#register .sendMess").find(".btn").eq(0).click(function(){if(t)if(s)if(l)if(n)if(r)if(c){var e=$("#register .phoneNum").find("input").eq(0).val(),i=$("#register .pwd").find("input").eq(0).val();$.ajax({type:"POST",url:"../api/insertUser.php",data:{username:e,password:i},success:function(e){"0"==JSON.parse(e).code?(alert("注册成功"),location.href="login.html"):alert("注册失败")}})}else alert("同意协议后才能注册");else $("#register .checkCode").find("input").eq(0).addClass("focus");else $("#register .pwdAgain").find("input").eq(0).addClass("focus"),o=!0;else $("#register .pwd").find("input").eq(0).addClass("focus"),o=!0;else $("#register .phoneNum").find("input").eq(0).addClass("focus"),o=!0;o&&(alert("请完善红框内的信息"),o=!1)})});